window begin: '2016-12-31T23:30:00Z'
window length: PT1H

geometry:
  input_file: Data/wrf_hydro_nwm_files/geometry_nwm_long_range_snow.nc

background:
  members:
    - date: &date 2017-01-01T00:00:00Z
      read_from_file: 1
      basename: "./INPUT/"
      filename_lsm: ./Data/wrf_hydro_nwm_files/RESTART.2017010100_sneqv_plus5_DOMAIN1
      filename_hydro: ./Data/wrf_hydro_nwm_files/HYDRO_RST.2017-01-01_00:00_DOMAIN1
      state variables: ['SNEQV']
    - date: &date 2017-01-01T00:00:00Z
      read_from_file: 1
      basename: "./INPUT/"
      filename_lsm: ./Data/wrf_hydro_nwm_files/RESTART.2017010100_sneqv_plus5_DOMAIN1
      filename_hydro: ./Data/wrf_hydro_nwm_files/HYDRO_RST.2017-01-01_00:00_DOMAIN1
      state variables: ['SNEQV']  
    - date: &date 2017-01-01T00:00:00Z
      read_from_file: 1
      basename: "./INPUT/"
      filename_lsm: ./Data/wrf_hydro_nwm_files/RESTART.2017010100_DOMAIN1
      filename_hydro: ./Data/wrf_hydro_nwm_files/HYDRO_RST.2017-01-01_00:00_DOMAIN1
      state variables: ['SNEQV']

observations:

- obs space:
    name: 'Simulate'
    distribution: InefficientDistribution
    simulated variables: ['swe']
    obsdatain:
      obsfile: 'Data/make_obs/make_obs_3d.swe_0000.nc'
    obsdataout:
      obsfile: 'Data/3dvar/3dvar.swe.nc'
  obs operator:
      name: 'Identity'    
  obs error:
      covariance model: 'diagonal'
  obs localization:
    lengthscale: 500 # some relevant number for distance as sqrt(x*x+y*y)
    distance type: cartesian
    search method: brute_force
    localization method: 'Gaspari-Cohn'

driver: 

local ensemble DA:
  solver: LETKF

output:
  filename_lsm: ./Data/letkf/lsm_letkf.nc
  filename_hydro: ./Data/letkf/hydro_letkf.nc

#  datadir: 'Data/letkf'
#  date: *date
#  exp: letkf.%{member}%
#  type: 'ens'
